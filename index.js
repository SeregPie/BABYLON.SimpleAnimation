!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("babylonjs")):"function"==typeof define&&define.amd?define(["babylonjs"],n):n((t=t||self).BABYLON)}(this,(function(t){"use strict";var n="default"in t?t.default:t;t.Scene.prototype.beginSimpleAnimation=function(t){var n=t.run(this);return{waitAsync:function(){return n}}};var o=function(){Object.assign(this,{onAnimationEndObservable:new t.Observable,onAnimationStartObservable:new t.Observable})};o.prototype.run=function(){for(var t=this,n=[],o=arguments.length;o--;)n[o]=arguments[o];return Promise.resolve().then((function(){t.onAnimationStartObservable.notifyObservers()})).then((function(){var o;return(o=t)._run.apply(o,n)})).then((function(){t.onAnimationEndObservable.notifyObservers()}))};var e=function(t){function n(n){t.call(this),Object.assign(this,{duration:n})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype._run=function(){var t=this;return new Promise((function(n){var o=t.duration;setTimeout(n,o)}))},n}(o),r=function(t){function n(){t.call(this),Object.assign(this,{_animations:[]})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.add=function(){for(var t,n=[],o=arguments.length;o--;)n[o]=arguments[o];return(t=this._animations).push.apply(t,n),this},n}(o),i=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var o={duration:{configurable:!0}};return o.duration.get=function(){return this._animations.reduce((function(t,n){var o=n.duration;return Math.max(t,o)}),0)},n.prototype._run=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Promise.all(this._animations.map((function(n){return n.run.apply(n,t)}))).then((function(){}))},Object.defineProperties(n.prototype,o),n}(r);function a(t){if(t){var n=typeof t;return"object"===n||"function"===n}return!1}t.Animation.GuessAnimationType=function(n){return n instanceof t.Vector3?t.Animation.ANIMATIONTYPE_VECTOR3:n instanceof t.Quaternion?t.Animation.ANIMATIONTYPE_QUATERNION:n instanceof t.Matrix?t.Animation.ANIMATIONTYPE_MATRIX:n instanceof t.Color3?t.Animation.ANIMATIONTYPE_COLOR3:n instanceof t.Color4?t.Animation.ANIMATIONTYPE_COLOR4:n instanceof t.Vector2?t.Animation.ANIMATIONTYPE_VECTOR2:n instanceof t.Size?t.Animation.ANIMATIONTYPE_SIZE:t.Animation.ANIMATIONTYPE_FLOAT};var u=function(n){function o(t){var o=t.target,e=t.property,r=t.type,i=t.from,a=t.to,u=t.duration,c=t.easing;n.call(this),Object.assign(this,{duration:u,easing:c,from:i,property:e,target:o,to:a,type:r})}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype._run=function(n){var o=this;return Promise.resolve().then((function(){var e=o,r=e.duration,i=e.easing,u=e.from,c=e.property,p=e.target,s=e.to,f=e.type;void 0===u&&(u=function(t,n){"string"==typeof n&&(n=n.split("."));for(var o=0,e=n.length;o<e;o++){if(!a(t))return;t=t[n[o]]}return t}(p,c)),void 0===f&&(f=t.Animation.GuessAnimationType(u));var l=new t.Animation("",c,60,f,t.Animation.ANIMATIONLOOPMODE_CONSTANT),m=0+Math.round(r/1e3*60),y=[{frame:0,value:u},{frame:m,value:s}];return l.setKeys(y),void 0!==i&&l.setEasingFunction(i),n.beginDirectAnimation(p,[l],0,m).waitAsync()}))},o}(o),c=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var o={duration:{configurable:!0}};return o.duration.get=function(){return this._animations.reduce((function(t,n){return t+n.duration}),0)},n.prototype._run=function(){for(var t=this,n=[],o=arguments.length;o--;)n[o]=arguments[o];return Promise.resolve().then((function(){var o=Promise.resolve();return t._animations.forEach((function(t){o=o.then((function(){return t.run.apply(t,n)}))})),o})).then((function(){}))},Object.defineProperties(n.prototype,o),n}(r),p=function(t){function n(n){t.call(this),Object.assign(this,{_calculateDelay:n})}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var o={duration:{configurable:!0}};return o.duration.get=function(){var t=this._animations,n=this._calculateDelay,o=0,e=0;return t.forEach((function(r,i,a){var u=a.length;i&&(e+=n(i,u,r,t[i-1])),o=Math.max(o,e+r.duration)})),o},n.prototype._run=function(){for(var t=this,n=[],o=arguments.length;o--;)n[o]=arguments[o];return Promise.resolve().then((function(){var o=t,r=o._animations,i=o._calculateDelay,a=[],u=0;return r.forEach((function(t,o,c){var p=c.length,s=Promise.resolve();if(o){u+=i(o,p,t,r[o-1]);var f=new e(u);s=s.then((function(){return f.run.apply(f,n)}))}s=s.then((function(){return t.run.apply(t,n)})),a.push(s)})),Promise.all(a)})).then((function(){}))},Object.defineProperties(n.prototype,o),n}(r),s=Object.freeze({__proto__:null,SimpleAnimation:o,SimpleAnimationDelay:e,SimpleAnimationGroup:r,SimpleParallelAnimationGroup:i,SimplePropertyAnimation:u,SimpleSequentialAnimationGroup:c,SimpleStaggeredAnimationGroup:p});Object.assign(n,s)}));
