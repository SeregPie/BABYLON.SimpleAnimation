!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("babylonjs")):"function"==typeof define&&define.amd?define(["babylonjs"],n):n((t=t||self).BABYLON)}(this,(function(t){"use strict";var n="default"in t?t.default:t;t.Scene.prototype.beginSimpleAnimation=function(t){var n=t.run(this);return{waitAsync:function(){return n}}};var e=function(){Object.assign(this,{onAnimationEndObservable:new t.Observable,onAnimationStartObservable:new t.Observable})};e.prototype.run=function(){for(var t=this,n=[],e=arguments.length;e--;)n[e]=arguments[e];return Promise.resolve().then((function(){t.onAnimationStartObservable.notifyObservers()})).then((function(){var e;return(e=t)._run.apply(e,n)})).then((function(){t.onAnimationEndObservable.notifyObservers()}))};var r=function(t){function n(n){t.call(this),Object.assign(this,{duration:n})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype._run=function(){var t=this;return new Promise((function(n){var e=t.duration;setTimeout(n,e)}))},n}(e),o=function(t){function n(){t.call(this),Object.assign(this,{_children:[]})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.add=function(){for(var t,n=[],e=arguments.length;e--;)n[e]=arguments[e];return(t=this._children).push.apply(t,n),this},n}(e),i=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var e={duration:{configurable:!0}};return e.duration.get=function(){return this._children.reduce((function(t,n){var e=n.duration;return Math.max(t,e)}),0)},n.prototype._run=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Promise.all(this._children.map((function(n){return n.run.apply(n,t)}))).then((function(){}))},Object.defineProperties(n.prototype,e),n}(o);function a(t){if(t){var n=typeof t;return"object"===n||"function"===n}return!1}t.Animation.GuessAnimationType=function(n){return n instanceof t.Vector3?t.Animation.ANIMATIONTYPE_VECTOR3:n instanceof t.Quaternion?t.Animation.ANIMATIONTYPE_QUATERNION:n instanceof t.Matrix?t.Animation.ANIMATIONTYPE_MATRIX:n instanceof t.Color3?t.Animation.ANIMATIONTYPE_COLOR3:n instanceof t.Color4?t.Animation.ANIMATIONTYPE_COLOR4:n instanceof t.Vector2?t.Animation.ANIMATIONTYPE_VECTOR2:n instanceof t.Size?t.Animation.ANIMATIONTYPE_SIZE:t.Animation.ANIMATIONTYPE_FLOAT};var u=function(n){function e(t){var e=t.target,r=t.property,o=t.type,i=t.from,a=t.to,u=t.duration,c=t.easing;n.call(this),Object.assign(this,{duration:u,easing:c,from:i,property:r,target:e,to:a,type:o})}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype._run=function(n){var e=this;return Promise.resolve().then((function(){var r=e,o=r.duration,i=r.easing,u=r.from,c=r.property,p=r.target,s=r.to,f=r.type;void 0===u&&(u=function(t,n){"string"==typeof n&&(n=n.split("."));for(var e=0,r=n.length;e<r;e++){if(!a(t))return;t=t[n[e]]}return t}(p,c)),void 0===f&&(f=t.Animation.GuessAnimationType(u));var l=new t.Animation("",c,60,f,t.Animation.ANIMATIONLOOPMODE_CONSTANT),y=0+Math.round(o/1e3*60),h=[{frame:0,value:u},{frame:y,value:s}];return l.setKeys(h),void 0!==i&&l.setEasingFunction(i),n.beginDirectAnimation(p,[l],0,y).waitAsync()}))},e}(e),c=function(t){function n(){t.apply(this,arguments)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var e={duration:{configurable:!0}};return e.duration.get=function(){return this._children.reduce((function(t,n){return t+n.duration}),0)},n.prototype._run=function(){for(var t=this,n=[],e=arguments.length;e--;)n[e]=arguments[e];return Promise.resolve().then((function(){var e=Promise.resolve();return t._children.forEach((function(t){e=e.then((function(){return t.run.apply(t,n)}))})),e})).then((function(){}))},Object.defineProperties(n.prototype,e),n}(o),p=function(t){function n(n){t.call(this),Object.assign(this,{_calculateDelay:n})}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var e={duration:{configurable:!0}};return e.duration.get=function(){var t=this._calculateDelay,n=this._children,e=0,r=0;return n.forEach((function(o,i,a){var u=a.length;i&&(r+=t(i,u,o,n[i-1])),e=Math.max(e,r+o.duration)})),e},n.prototype._run=function(){for(var t=this,n=[],e=arguments.length;e--;)n[e]=arguments[e];return Promise.resolve().then((function(){var e=t,o=e._calculateDelay,i=e._children,a=[],u=0;return i.forEach((function(t,e,c){var p=c.length,s=Promise.resolve();if(e){u+=o(e,p,t,i[e-1]);var f=new r(u);s=s.then((function(){return f.run.apply(f,n)}))}s=s.then((function(){return t.run.apply(t,n)})),a.push(s)})),Promise.all(a)})).then((function(){}))},Object.defineProperties(n.prototype,e),n}(o),s=Object.freeze({__proto__:null,SimpleAnimation:e,SimpleAnimationDelay:r,SimpleAnimationGroup:o,SimpleParallelAnimationGroup:i,SimplePropertyAnimation:u,SimpleSequentialAnimationGroup:c,SimpleStaggeredAnimationGroup:p});Object.assign(n,s)}));
